atlas接口api:http://atlas.apache.org/api/v2/ui/index.html#/


kinit -kt /mnt/keytab/hadoop.keytab hdfs/namenode@DEV
curl -X GET --header 'Accept: application/json' 'http://localhost:21000/api/atlas/v2/search/basic'


namenode 

curl --negotiate -u : http://atlas:21000/api/atlas/v2/search/basic  -H 'Content-Type: application/json'   --data-binary '{"excludeDeletedEntities":true,"includeSubClassifications":true,"includeSubTypes":true,"includeClassificationAttributes":true,"entityFilters":null,"tagFilters":null,"attributes":[],"limit":25,"offset":0,"typeName":"AtlasServer","classification":null,"termName":null}' 



# atlas/login
curl 'http://47.95.207.206:8080/atlas/login?&user=HTTP/atlas@DEV&url=http://namenode:21000/api/atlas/v2/search/basic&keyTab=/home/zy/atlasDemo/hadoop.keytab'



curl 'http://localhost:18083/krb?&url=http://atlas:21000/api/atlas/admin/version'


curl 'http://47.95.207.206:38080/hdfs?path=/&user=hdfs/namenode@DEV&url=hdfs://namenode:9000&keyTab=/mnt/hadoop.keytab'




http://atlas:21000/api/atlas/v2/search/basic  -H 'Content-Type: application/json'   --data-binary '{"excludeDeletedEntities":true,"includeSubClassifications":true,"includeSubTypes":true,"includeClassificationAttributes":true,"entityFilters":null,"tagFilters":null,"attributes":[],"limit":25,"offset":0,"typeName":"AtlasServer","classification":null,"termName":null}'  

返回值：

{"queryType":"BASIC","searchParameters":{"typeName":"AtlasServer","excludeDeletedEntities":true,"includeClassificationAttributes":true,"includeSubTypes":true,"includeSubClassifications":true,"limit":25,"offset":0,"attributes":[]}}

curl -vv --negotiate -u : http://atlas:21000/api/atlas/v2/search/basic  -H 'Content-Type: application/json'   --data-binary '{"excludeDeletedEntities":true,"includeSubClassifications":true,"includeSubTypes":true,"includeClassificationAttributes":true,"

entityFilters":null,"tagFilters":null,"attributes":[],
"limit":25,"offset":0,"typeName":"AtlasServer","classification":null,"termName":null}' 


curl  -vv --negotiate -u :  'http://atlas:21000/api/atlas/v2/search/basic'  -H 'Content-Type: application/json'  --data-binary '{"limit":25,"offset":0,"typeName":"Table"}'



curl  -vv --negotiate -u :  'http://atlas:21000/api/atlas/v2/search/basic'  -H 'Content-Type: application/json'  --data-binary '{"excludeDeletedEntities":true,"limit":25,"offset":0,"typeName":"Table"}'


curl:
	curl  -vv --negotiate -u :  "http://atlas:21000/api/atlas/admin/version"
curl:
	curl  -vv --negotiate -u :  --header 'Accept: application/json' 'http://atlas:21000/api/atlas/v2/search/basic?excludeDeletedEntities=true&limit=25&offset=0&typeName=Table'
	
	后端报错，curl测试
	报错：{"errorCode":"ATLAS-400-00-046","errorMessage":"null: Unknown/invalid classification"}
	curl  -vv --negotiate -u :  --header 'Accept: application/json' 'http://atlas:21000/api/atlas/v2/search/basic?classification=null&query=null&sortBy=null&sortOrder=null&typeName=Table&limit=25&offset=0&excludeDeletedEntities=null'
	
	去掉null参数：返回成功，解决
	curl  -vv --negotiate -u :  --header 'Accept: application/json' 'http://atlas:21000/api/atlas/v2/search/basic?typeName=Table&limit=25&offset=0'

成功：
	curl 'http://localhost:18083/krb?url=http://atlas:21000/api/atlas/v2/search/basic&excludeDeletedEntities=true&limit=25&offset=0&typeName=Table'
	
	curl 'http://localhost:18083/krb?url=http://atlas:21000/api/atlas/v2/search/basic&excludeDeletedEntities=true&limit=25&offset=0&typeName=Table'
